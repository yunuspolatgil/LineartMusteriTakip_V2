@page
@model AspnetCoreStarter.Pages.Apps.Musteriler.ListModel
@{
    ViewData["Title"] = "Müşteri Listesi - Müşteri Yönetimi";
}

@section VendorStyles {
<link rel="stylesheet" href="~/vendor/libs/datatables-bs5/datatables.bootstrap5.dist.css">
<link rel="stylesheet" href="~/vendor/libs/datatables-responsive-bs5/responsive.bootstrap5.dist.css">
<link rel="stylesheet" href="~/vendor/libs/datatables-buttons-bs5/buttons.bootstrap5.dist.css">
<link rel="stylesheet" href="~/vendor/libs/select2/select2.dist.css" />
<link rel="stylesheet" href="~/vendor/libs/&#64;form-validation/form-validation.dist.css" />
}

@section VendorScripts {
<script src="~/vendor/libs/moment/moment.dist.js"></script>
<script src="~/vendor/libs/datatables-bs5/datatables-bootstrap5.dist.js"></script>
<script src="~/vendor/libs/select2/select2.dist.js"></script>
<script src="~/vendor/libs/&#64;form-validation/popular.dist.js"></script>
<script src="~/vendor/libs/&#64;form-validation/bootstrap5.dist.js"></script>
<script src="~/vendor/libs/&#64;form-validation/auto-focus.dist.js"></script>
<script src="~/vendor/libs/cleavejs/cleave.dist.js"></script>
<script src="~/vendor/libs/cleavejs/cleave-phone.dist.js"></script>
}

@section PageScripts {
<script src="~/js/app-musteri-list.dist.js"></script>
}

<!-- CSRF Token -->
<form>
  @Html.AntiForgeryToken()
</form>

@* ************** Content ************** *@

<!-- İstatistik Kartları -->
<div class="row g-6 mb-6">
  <div class="col-sm-6 col-xl-3">
    <div class="card">
      <div class="card-body">
        <div class="d-flex align-items-start justify-content-between">
          <div class="content-left">
            <span class="text-heading">Toplam Müşteri</span>
            <div class="d-flex align-items-center my-1">
              <h4 class="mb-0 me-2" id="toplamMusteri">-</h4>
              <p class="text-success mb-0" id="musteriArtis">-</p>
            </div>
            <small class="mb-0">Tüm müşteriler</small>
          </div>
          <div class="avatar">
            <span class="avatar-initial rounded bg-label-primary">
              <i class="ti ti-users ti-26px"></i>
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col-sm-6 col-xl-3">
    <div class="card">
      <div class="card-body">
        <div class="d-flex align-items-start justify-content-between">
          <div class="content-left">
            <span class="text-heading">Aktif Müşteri</span>
            <div class="d-flex align-items-center my-1">
              <h4 class="mb-0 me-2" id="aktifMusteri">-</h4>
              <p class="text-success mb-0" id="aktifOran">-</p>
            </div>
            <small class="mb-0">Aktif durumdaki müşteriler</small>
          </div>
          <div class="avatar">
            <span class="avatar-initial rounded bg-label-success">
              <i class="ti ti-user-check ti-26px"></i>
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col-sm-6 col-xl-3">
    <div class="card">
      <div class="card-body">
        <div class="d-flex align-items-start justify-content-between">
          <div class="content-left">
            <span class="text-heading">Pasif Müşteri</span>
            <div class="d-flex align-items-center my-1">
              <h4 class="mb-0 me-2" id="pasifMusteri">-</h4>
              <p class="text-danger mb-0" id="pasifOran">-</p>
            </div>
            <small class="mb-0">Pasif durumdaki müşteriler</small>
          </div>
          <div class="avatar">
            <span class="avatar-initial rounded bg-label-warning">
              <i class="ti ti-user-x ti-26px"></i>
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col-sm-6 col-xl-3">
    <div class="card">
      <div class="card-body">
        <div class="d-flex align-items-start justify-content-between">
          <div class="content-left">
            <span class="text-heading">Bu Ay Eklenen</span>
            <div class="d-flex align-items-center my-1">
              <h4 class="mb-0 me-2" id="buAyEklenen">-</h4>
              <p class="text-info mb-0" id="buAyOran">-</p>
            </div>
            <small class="mb-0">Bu ay eklenen müşteriler</small>
          </div>
          <div class="avatar">
            <span class="avatar-initial rounded bg-label-info">
              <i class="ti ti-user-plus ti-26px"></i>
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Müşteri Listesi -->
<div class="card">
  <div class="card-header border-bottom">
    <h5 class="card-title mb-0">
      <i class="ti ti-users ti-xs me-2"></i>
      Müşteri Listesi
    </h5>
  </div>
  <div class="card-datatable table-responsive">
    <table class="datatables-musteriler table table-bordered">
      <thead class="border-top">
        <tr>
          <th></th>
          <th>ID</th>
          <th>Ad Soyad</th>
          <th>E-posta</th>
          <th>Telefon</th>
          <th>Adres</th>
          <th>Durum</th>
          <th>Kayıt Tarihi</th>
          <th>İşlemler</th>
        </tr>
      </thead>
    </table>
  </div>

  <!-- Yeni Müşteri Ekleme Offcanvas -->
  <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasAddMusteri" aria-labelledby="offcanvasAddMusteriLabel">
    <div class="offcanvas-header border-bottom">
      <h5 id="offcanvasAddMusteriLabel" class="offcanvas-title">
        <i class="ti ti-user-plus me-2"></i>Yeni Müşteri Ekle
      </h5>
      <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body mx-0 flex-grow-0 h-100">
      <form class="add-new-musteri pt-0" id="addNewMusteriForm">
        <div class="form-floating form-floating-outline mb-5">
          <input type="text" class="form-control" id="add-musteri-adsoyad" placeholder="Ad Soyad" name="adSoyad" required />
          <label for="add-musteri-adsoyad">Ad Soyad</label>
        </div>
        <div class="form-floating form-floating-outline mb-5">
          <input type="email" class="form-control" id="add-musteri-email" placeholder="E-posta" name="email" required />
          <label for="add-musteri-email">E-posta</label>
        </div>
        <div class="form-floating form-floating-outline mb-5">
          <input type="tel" class="form-control" id="add-musteri-telefon" placeholder="Telefon" name="telefon" />
          <label for="add-musteri-telefon">Telefon</label>
        </div>
        <div class="form-floating form-floating-outline mb-5">
          <textarea class="form-control" id="add-musteri-adres" placeholder="Adres" name="adres" rows="3"></textarea>
          <label for="add-musteri-adres">Adres</label>
        </div>
        <div class="form-floating form-floating-outline mb-5">
          <select class="form-select" id="add-musteri-aktif" name="aktif">
            <option value="true">Aktif</option>
            <option value="false">Pasif</option>
          </select>
          <label for="add-musteri-aktif">Durum</label>
        </div>
        <button type="submit" class="btn btn-primary me-sm-3 me-1 data-submit">
          <i class="ti ti-check me-1"></i>Kaydet
        </button>
        <button type="reset" class="btn btn-outline-secondary" data-bs-dismiss="offcanvas">
          <i class="ti ti-x me-1"></i>İptal
        </button>
      </form>
    </div>
  </div>

  <!-- Müşteri Düzenleme Offcanvas -->
  <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasEditMusteri" aria-labelledby="offcanvasEditMusteriLabel">
    <div class="offcanvas-header border-bottom">
      <h5 id="offcanvasEditMusteriLabel" class="offcanvas-title">
        <i class="ti ti-edit me-2"></i>Müşteri Düzenle
      </h5>
      <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body mx-0 flex-grow-0 h-100">
      <form class="edit-musteri pt-0" id="editMusteriForm">
        <input type="hidden" id="edit-musteri-id" name="id" />
        <div class="form-floating form-floating-outline mb-5">
          <input type="text" class="form-control" id="edit-musteri-adsoyad" placeholder="Ad Soyad" name="adSoyad" required />
          <label for="edit-musteri-adsoyad">Ad Soyad</label>
        </div>
        <div class="form-floating form-floating-outline mb-5">
          <input type="email" class="form-control" id="edit-musteri-email" placeholder="E-posta" name="email" required />
          <label for="edit-musteri-email">E-posta</label>
        </div>
        <div class="form-floating form-floating-outline mb-5">
          <input type="tel" class="form-control" id="edit-musteri-telefon" placeholder="Telefon" name="telefon" />
          <label for="edit-musteri-telefon">Telefon</label>
        </div>
        <div class="form-floating form-floating-outline mb-5">
          <textarea class="form-control" id="edit-musteri-adres" placeholder="Adres" name="adres" rows="3"></textarea>
          <label for="edit-musteri-adres">Adres</label>
        </div>
        <div class="form-floating form-floating-outline mb-5">
          <select class="form-select" id="edit-musteri-aktif" name="aktif">
            <option value="true">Aktif</option>
            <option value="false">Pasif</option>
          </select>
          <label for="edit-musteri-aktif">Durum</label>
        </div>
        <button type="submit" class="btn btn-primary me-sm-3 me-1 data-submit">
          <i class="ti ti-check me-1"></i>Güncelle
        </button>
        <button type="reset" class="btn btn-outline-secondary" data-bs-dismiss="offcanvas">
          <i class="ti ti-x me-1"></i>İptal
        </button>
      </form>
    </div>
  </div>
</div>

<!-- Delete Confirmation Modal -->
<div class="modal fade" id="deleteModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">
          <i class="ti ti-trash me-2 text-danger"></i>Müşteri Sil
        </h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <div class="text-center">
          <div class="avatar avatar-xl mx-auto mb-3">
            <span class="avatar-initial rounded-circle bg-label-danger">
              <i class="ti ti-trash ti-40px"></i>
            </span>
          </div>
          <h5 class="mb-2">Bu müşteriyi silmek istediğinizden emin misiniz?</h5>
          <p class="text-muted mb-0">Bu işlem geri alınamaz!</p>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">İptal</button>
        <button type="button" class="btn btn-danger" id="confirmDelete">
          <i class="ti ti-trash me-1"></i>Evet, Sil
        </button>
      </div>
    </div>
  </div>
</div>
